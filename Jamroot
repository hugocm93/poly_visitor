import os ;

local boost_path = [ os.environ BOOST_PATH ] ;
if ! $(boost_path)
{
    boost_path = "/Users/rcosme/install/boost-1.60.0" ;
}

project poly_visitor
  : requirements
    <cxxflags>-std=c++11
    <include>include
    <include>$(boost_path)/include
    <include>$(loki)/include
    <include>$(asl)
  : default-build
    <optimization>speed
    <variant>release
    <warnings>all
  ;

rule exe-aux ( type : name : reqs * : deps * )
{
    exe $(name)
        : $(type)/$(name).cpp
        : $(reqs)
          <include>$(type)
        : $(deps)
        ;
    explicit $(name) ;
}

exe-aux demo : simple ;
exe-aux demo : generic_visit ;
exe-aux demo : visitor_with_state ;
exe-aux demo : visitor_with_return ;
exe-aux demo : visitor_delayed ;
exe-aux demo : intermediate_base ;
    
exe-aux test : const ;
exe-aux test : return_movable ;
exe-aux test : return_not_movable ;
exe-aux test : benchmark_dynamic_cast ;
exe-aux test : delayed ;

install stage
  : simple
    generic_visit
    visitor_with_state
    visitor_with_return
    visitor_delayed
    intermediate_base
    const
    return_movable
    return_not_movable
    benchmark_dynamic_cast
    delayed
  ;
